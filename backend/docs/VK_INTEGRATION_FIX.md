# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∑–∞–¥–∞—á–∏ 3.2

## üéØ –ü—Ä–æ–±–ª–µ–º–∞

–ó–∞–¥–∞—á–∞ 3.2 (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏) –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã VK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏.

### ‚ùå –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–°–º–µ—à–µ–Ω–∏–µ —Ä–∞–∑–Ω—ã—Ö OAuth –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤**: OAuth VK ID (–Ω–æ–≤—ã–π) –∏ OAuth –í–ö–æ–Ω—Ç–∞–∫—Ç–µ (—Å—Ç–∞—Ä—ã–π)
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã**: User Access Token –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≥—Ä—É–ø–ø—ã
3. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–æ–¥—Ö–æ–¥**: –ù–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ VK

## üìö –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ VK

### VK ID OAuth (OAuth 2.1) - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ VK –∞–∫–∫–∞—É–Ω—Ç
- **–¢–æ–∫–µ–Ω—ã**: User Access Token (–∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π)
- **–û–±–ª–∞—Å—Ç—å**: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è, —Ñ–æ—Ç–æ, email)

### VK API - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∞–π–∫–æ–≤, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤, –ø–æ–¥–ø–∏—Å–æ–∫
- **–¢–æ–∫–µ–Ω—ã**: Group Token –∏–ª–∏ Service Key
- **–û–±–ª–∞—Å—Ç—å**: API –º–µ—Ç–æ–¥—ã –≥—Ä—É–ø–ø/—Å–æ–æ–±—â–µ—Å—Ç–≤

## üîß –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### 1. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (VK ID OAuth)
```javascript
// ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
const vkData = await vkOAuthService.verifyAndLinkAccount(vkData, telegramId);
```

### 2. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (VK API)
```javascript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç User Access Token
await vk.hasLikedPost(userVkId, groupId, postId);

// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Group Token
await vk.hasLikedPost(userVkId, groupId, postId, GROUP_TOKEN);
```

## üõ†Ô∏è –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç—å Group Token
1. –ó–∞–π—Ç–∏ –≤ [VK Developers](https://dev.vk.com/)
2. –í—ã–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é
4. –ü–æ–ª—É—á–∏—Ç—å Group Token —Å –ø—Ä–∞–≤–∞–º–∏: `wall`, `groups`, `offline`

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å .env
```env
# –î–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (VK ID OAuth)
VK_CLIENT_ID=54020028
VK_CLIENT_SECRET=—Ä–µ–∞–ª—å–Ω—ã–π_–∑–∞—â–∏—â—ë–Ω–Ω—ã–π_–∫–ª—é—á
VK_SERVICE_KEY=—Å–µ—Ä–≤–∏—Å–Ω—ã–π_–∫–ª—é—á_–¥–ª—è_VK_ID

# –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (VK API)
VK_GROUP_ID=123456789
VK_GROUP_TOKEN=–≥—Ä—É–ø–ø–æ–≤–æ–π_—Ç–æ–∫–µ–Ω_—Å_–ø—Ä–∞–≤–∞–º–∏_wall_groups_offline

# –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π (VK Bot API)
VK_CONFIRMATION_TOKEN=—Å—Ç—Ä–æ–∫–∞_–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
VK_SECRET_KEY=—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_callback
```

### –®–∞–≥ 3: –ò—Å–ø—Ä–∞–≤–∏—Ç—å vk.service.js
```javascript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GROUP_TOKEN –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
const VK_GROUP_TOKEN = process.env.VK_GROUP_TOKEN;

async function hasLikedPost(userId, ownerId, postId) {
    const response = await axios.get('https://api.vk.com/method/likes.isLiked', {
        params: {
            access_token: VK_GROUP_TOKEN, // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω
            user_id: userId,
            type: 'post',
            owner_id: ownerId,
            item_id: postId,
            v: '5.199'
        }
    });
    return response.data.response.liked === 1;
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ VK –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ VK ID OAuth (–∑–∞–¥–∞—á–∞ 1.1)
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ VK API (–∑–∞–¥–∞—á–∞ 3.2)
- ‚úÖ –°–æ–±—ã—Ç–∏—è –≥—Ä—É–ø–ø—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ VK Bot API

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü–æ–ª—É—á–∏—Ç—å VK_GROUP_TOKEN
2. –û–±–Ω–æ–≤–∏—Ç—å vk.service.js —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É 3.2
4. –û–±–Ω–æ–≤–∏—Ç—å task.md —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
