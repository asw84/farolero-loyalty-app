# üì∏ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Instagram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üéØ –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ **–ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:**
- INSTAGRAM_REDIRECT_URI: –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ‚úÖ
- –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã ‚úÖ  
- URL —Å—Ç—Ä—É–∫—Ç—É—Ä–∞: –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è ‚úÖ
- Instagram API: –¥–æ—Å—Ç—É–ø–µ–Ω ‚úÖ
- HTTPS: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚úÖ
- Routes: –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ server.js ‚úÖ

### ‚ùå **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:**
1. **INSTAGRAM_APP_ID** - —Å–æ–¥–µ—Ä–∂–∏—Ç placeholder `YOUR_INSTAGRAM_APP_ID`
2. **INSTAGRAM_APP_SECRET** - —Å–æ–¥–µ—Ä–∂–∏—Ç placeholder `YOUR_INSTAGRAM_APP_SECRET`

### üìä **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å VK:**
- **VK**: 90% –≥–æ—Ç–æ–≤–∞ (—Ç–æ–ª—å–∫–æ –Ω—É–∂–µ–Ω —Ä–µ–∞–ª—å–Ω—ã–π CLIENT_SECRET)
- **Instagram**: 75% –≥–æ—Ç–æ–≤–∞ (–Ω—É–∂–Ω—ã APP_ID –∏ APP_SECRET)

---

## üèóÔ∏è –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Instagram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### **–®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ Facebook/Instagram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**

1. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Facebook Developers:**
   ```
   https://developers.facebook.com/
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
   - –ù–∞–∂–º–∏—Ç–µ "Create App"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø: "Consumer" –∏–ª–∏ "Business"  
   - –í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: "Farolero Loyalty App"
   - –î–æ–±–∞–≤—å—Ç–µ email –∫–æ–Ω—Ç–∞–∫—Ç

3. **–î–æ–±–∞–≤—å—Ç–µ Instagram Basic Display:**
   - –í Dashboard –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ù–∞–∂–º–∏—Ç–µ "+ Add Product"
   - –ù–∞–π–¥–∏—Ç–µ "Instagram Basic Display"
   - –ù–∞–∂–º–∏—Ç–µ "Set Up"

### **–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Instagram Basic Display**

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Valid OAuth Redirect URIs:**
   ```
   https://api.5425685-au70735.twc1.net/api/instagram/callback
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Deauthorize Callback URL:**
   ```
   https://api.5425685-au70735.twc1.net/api/instagram/deauth
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π–∏—Ç–µ Data Deletion Request URL:**
   ```
   https://api.5425685-au70735.twc1.net/api/instagram/data-deletion
   ```

### **–®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö**

1. **Instagram App ID:**
   - –í —Ä–∞–∑–¥–µ–ª–µ "Instagram Basic Display" ‚Üí "Basic Display"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ "Instagram App ID"

2. **Instagram App Secret:**
   - –í —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ
   - –ù–∞–∂–º–∏—Ç–µ "Show" —Ä—è–¥–æ–º —Å "Instagram App Secret"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á

### **–®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env —Ñ–∞–π–ª–∞**

–ó–∞–º–µ–Ω–∏—Ç–µ placeholders –≤ `backend/.env`:

```env
# Instagram OAuth Configuration
INSTAGRAM_APP_ID=–≤–∞—à_instagram_app_id_–∑–¥–µ—Å—å
INSTAGRAM_APP_SECRET=–≤–∞—à_instagram_app_secret_–∑–¥–µ—Å—å
INSTAGRAM_REDIRECT_URI=https://api.5425685-au70735.twc1.net/api/instagram/callback
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### **1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:**
```bash
node test-instagram-integration.js
```

### **2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:**

**URL –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∑–∞–º–µ–Ω–∏—Ç–µ APP_ID):**
```
https://api.instagram.com/oauth/authorize?client_id=–í–ê–®_APP_ID&redirect_uri=https%3A%2F%2Fapi.5425685-au70735.twc1.net%2Fapi%2Finstagram%2Fcallback&scope=user_profile%2Cuser_media&response_type=code&state=test_state
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ callback:**
–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Instagram –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞:
```
https://api.5425685-au70735.twc1.net/api/instagram/callback?code=XXX&state=YYY
```

---

## üîß –î–æ—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–¥–∞

### **–ü—Ä–æ–±–ª–µ–º–∞ –≤ instagram.controller.js:**

–¢–µ–∫—É—â–∏–π –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–≥–ª—É—à–∫—É –¥–ª—è `telegram_user_id`:

```javascript
// –¢–ï–ö–£–©–ò–ô –ö–û–î (–ü–†–û–ë–õ–ï–ú–ê):
const telegram_user_id = '123456789'; // –ó–ê–ì–õ–£–®–ö–ê
```

### **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

<function_calls>
<invoke name="search_replace">
<parameter name="file_path">backend/controllers/instagram.controller.js
